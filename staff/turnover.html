<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>方向幕 自動スクロール</title>
  <style>
    #rollsign {
      width: 600px;
      height: auto;
      border: 2px solid #333;
    }
    button, input {
      margin: 10px;
      padding: 8px 16px;
    }
  </style>
</head>
<body>
  <h2>方向幕 自動スクロール</h2>
  <img id="rollsign" src="assets/TO1.png" alt="方向幕">

  <div>
    <!-- 停止番号を入力できる -->
    <label>停止番号: <input type="number" id="stopIndex" value="5" min="1"></label>
    <button onclick="startAutoScroll()">▶ 自動スクロール開始</button>
    <button onclick="stopAutoScroll()">■ 停止</button>
  </div>

  <script>
    const totalImages = 3; // 画像枚数
    const basePath = "assets/images/to/";
    const images = [];
    for (let i = 1; i <= totalImages; i++) {
      images.push(`${basePath}TO${i}.png`);
    }

    let currentIndex = 0;
    const rollsign = document.getElementById("rollsign");
    let scrollTimer = null;

    function showImage(index) {
      rollsign.src = images[index];
    }

    function nextImage() {
      // n→1につなげる
      currentIndex = (currentIndex + 1) % images.length;
      showImage(currentIndex);
    }

    function startAutoScroll() {
      stopAutoScroll(); // 二重起動防止
      const stopIndex = parseInt(document.getElementById("stopIndex").value, 10) - 1; // HTML入力値(1始まり→0始まり)
      scrollTimer = setInterval(() => {
        nextImage();
        if (currentIndex === stopIndex) {
          stopAutoScroll();
        }
      }, 1000); // 1秒ごとに切り替え
    }

    function stopAutoScroll() {
      if (scrollTimer) {
        clearInterval(scrollTimer);
        scrollTimer = null;
      }
    }
  </script>
</body>
</html>
